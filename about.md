## 1. Research: Hive Database in Flutter

- Keywords:
    - Hive database in flutter
    - Hive database flutter tutorial
    - hive in flutter
    - hive database flutter
    - Hive database flutter github
    - hive flutter pub dev
    - Hive database flutter example
    - hive_generator
    - hive generator flutter
    - hive docs
    - hive generator github
    - hive flutter
    - hive flutter pub dev
    - hive generator flutter github
    - hive generator command
    - flutter hive vs sqlite
    - hive database tutorial
    - hive flutter documentation
    - flutter hive example
    - hive flutter example
- Video Title: Hive Database in Flutter with Hive Generator and Example

## 2. Research: Competitors

**Flutter Videos/Articles**

- https://pub.dev/packages/hive
- https://docs.hivedb.dev/#/
- https://medium.com/@mustafatahirhussein/hive-database-in-flutter-an-overview-30e6d4ad7424
- https://blog.devgenius.io/the-ultimate-guide-to-using-hive-in-flutter-5f5cada88841
- https://blog.logrocket.com/handling-local-data-persistence-flutter-hive/
- https://medium.flutterdevs.com/hive-database-with-typeadapter-in-flutter-7390d0e515fa
- https://www.kindacode.com/article/flutter-hive-database/
- https://support.syncfusion.com/kb/article/10840/how-to-load-data-to-flutter-datatable-sfdatagrid-with-hive-box
- https://www.optisolbusiness.com/insight/flutter-offline-storage-using-hive-database
- https://www.oneclickitsolution.com/blog/hive-database-integration-in-flutter/
- https://www.biztechcs.com/blog/handle-offline-data-storage-with-flutter-hive/
- https://learnpainless.com/flutter-hive-db-example/
- https://www.yourteaminindia.com/blog/flutter-hive-database
- https://www.geeksforgeeks.org/flutter-store-data-in-hive-local-database/
- https://www.technoexponent.com/blog/a-complete-guide-on-the-flutter-hive-database/
- https://betterprogramming.pub/build-a-simple-to-do-app-using-hive-database-2a61331c9e75
- https://mobikul.com/hive-database-in-flutter/
- https://protocoderspoint.com/flutter-hive-nosql-database-basic-example/
- https://flutteragency.com/manage-offline-data-storage-flutter-hive/
- https://climbtheladder.com/10-flutter-hive-best-practices/
- https://dev.to/amrsaied/introducing-hive-ui-a-flutter-package-for-easily-managing-your-hive-database-59i6
- https://itnext.io/flutter-save-data-to-local-storage-with-hive-nosql-database-package-8a0de834f313
- https://resocoder.com/2019/09/30/hive-flutter-tutorial-lightweight-fast-database/
- https://www.flutterdirectory.com/interesting-concept-of-hive-database-for-flutter/
- https://objectbox.io/flutter-databases-sqflite-hive-objectbox-and-moor/
- https://flutterappworld.com/basic-implementation-of-flutter-hive-database/
- https://priiimo.com/en/computer-science/tutorials/easy-guide-to-use-hive-db-with-flutter/5f1921a77b5fef058be6ff78
- https://morioh.com/a/f124fd15bb64/flutter-web-and-hive-or-using-hive-in-flutter-web
- https://copyprogramming.com/howto/flutter-dart-export-hive-saved-data-to-file-to-retrieve-later
- 96K: https://youtu.be/R1GSrrItqUs
- 8.1K - Playlist: https://youtu.be/mKTmzdXLdH4?list=PLFyjjoCMAPtyQAnT6GilOjctmtTLBOZf4
- 30K: https://youtu.be/ee2RUDriM5g
- 89K: https://youtu.be/w8cZKm9s228
- 16K: https://youtu.be/xN_OTO5EYKY
- 50K: https://youtu.be/L-oUzgxOfdY
- 2.1K - Playlist: https://youtu.be/dDd82p3xFpA?list=PLztm2TugcV9TlPg1BqY9D-zv_xo80Q4bp
- 45K: https://youtu.be/FB9GpmL0Qe0

**Android/Swift/React Videos**

- https://www.educba.com/jdbc-hive/
- https://www.tencentcloud.com/document/product/1026/31147
- https://sparkbyexamples.com/apache-hive/hive-create-database-from-java-example/
- https://www.javatpoint.com/nosql-databases
- https://thenewstack.io/getting-started-with-nosql-and-java/
- https://www.alachisoft.com/resources/articles/client-java-api-nosql.html
- https://developer.okta.com/blog/2017/09/08/nosql-options-for-java-developers
- https://www.javacodegeeks.com/nosql-tutorials
- https://dzone.com/articles/nosql-options-for-java-developers
- https://medium.com/kodein-koders/announcing-a-painless-kotlin-multiplatform-nosql-embedded-database-30fed677549c
- https://www.mongodb.com/developer/products/realm/announcing-realm-kotlin-beta/
- https://www.couchbase.com/
- https://github.com/couchbaselabs/TouchDB-iOS
- https://github.com/daleharvey/pouchdb
- https://rxdb.info/react-native-database.html#:~:text=RxDB%20is%20an%20offline%2Dfirst,single%20field%20of%20a%20document.
- https://blog.codemagic.io/choosing-the-right-database-for-react-native-app/
- https://taglineinfotech.com/react-native-database/
- https://medium.com/@dubaidevmarketing/top-10-local-databases-for-react-native-app-development-in-2023-5944bb58042e
- https://www.mindinventory.com/blog/top-react-native-databases/
- 35K: https://youtu.be/6QnY7Ri_ORw?si=6uosS2YnP60asBAZ
- Playlist: https://www.youtube.com/watch?v=hainZwgvGYY&list=PLVz2XdJiJQxyxZK0ggHweWODoVTkXsWUA
- 891K: https://www.youtube.com/watch?v=0buKQHokLK8&pp=ygUTbm9zcWwgZGF0YWJhc2UgamF2YQ%3D%3D
- Playlist: https://www.youtube.com/watch?v=qEhNHOEa5sE&list=PLsyeobzWxl7r0bn6dzVA8bQNxcx7DRl5F
- 10K: https://www.youtube.com/watch?v=hainZwgvGYY&pp=ygUTbm9zcWwgZGF0YWJhc2UgamF2YQ%3D%3D
- 104K: https://www.youtube.com/watch?v=B3gJT3t8g4Q&pp=ygUTbm9zcWwgZGF0YWJhc2UgamF2YQ%3D%3D
- Playlist: https://www.youtube.com/watch?v=sDW0Ws6qPew&list=PLKCk3OyNwIzvBhDy_78WhhO6SxdWKedP5
- 178: https://www.youtube.com/watch?v=C79MJTyuJvE&pp=ygUUbm9zcWwgZGF0YWJhc2Ugc3dpZnQ%3D
- 4.6K: https://www.youtube.com/watch?v=3GzN4KFEf7c&pp=ygUbbm9zcWwgZGF0YWJhc2UgcmVhY3QgbmF0aXZl
- 12K: https://www.youtube.com/watch?v=5zdX76N3iq0&pp=ygUbbm9zcWwgZGF0YWJhc2UgcmVhY3QgbmF0aXZl

**Great Features**

- Hive is lightweight and efficient NoSQL database solution for Flutter with fast key-value database
  written in pure Dart.
- It is strongly encrypted using AES-256.
- Hive is known for its exceptional performance.
- It's designed for local data storage on the device for storing data without network connectivity
  requirements.
- Hive supports storing various data types directly without requiring complex data conversion. This
  includes primitives, lists, maps, and user-defined models.
- Hive supports type safety, ensuring that data is stored and retrieved with proper types,
  preventing issues related to data type mismatches.
- Hive doesn't require Object-Relational Mapping (ORM) tools.
- Hive uses efficient serialization and deserialization methods.
- Data is organized within Hive Boxes, similar to collections.

**Problems from Videos**

- **Question**: How to find this database in my mobile device in file manager?<br/>
  **Answer**: Go to file manager and under your app package name.
- **Question**: Why Hive and why not something else like shared_preference or sqlite?<br/>
  **Answer**: Hive is significantly faster, than shared preferences, and sqlite is for different use
  cases as sqlite is for relational databases, in cases where you need to do simple things and you
  don't need queries to search for info Hive makes more sense.
- **Question**: I am making a wallpaper app linked to firebase.. I wanted to know, how can I serve
  the user with wallpapers related to a specific keyword? Like for eg. if a user searches for
  Lamborghini, he should get wallpapers of only Lamborghini and not other cars and wallpapers<br/>
  **Answer**: add keywords field in the database, and from search field search the keywords field in
  database
- **Question**: Does it support windows? And can I back up my data and load it on another
  platform?<br/>
  **Answer**: yes it support windows ‚ö° and if you want to back up your data, you will have to save
  them in a server and get them from the other device and it should work fine
- **Question**: sir can you tell me difference between 1 and 2:

1. ```dart
   Directory directory = await pathProvider.getApplicationDocumentsDirectory();
   Hive.init(directory.path);
   ```

2. ```dart
   await Hive.initFlutter();
   ```

**Answer**: Both are the same. The first one can be user without Flutter and the second is made for
Flutter. The second one will handle the directory behind the scene for you üëè Hope this help ‚ö°Ô∏è.

- **Question**: Is there an actual way to connect hive with other forms of cloud databases like for
  example firestore or even MySQL, or do I have to implement them separately?<br/>
  **Answer**: Hive sits in the app itself, mysql is in the server side. So they are different ideas.
  There's not direct connection.

- **Question**: Is hive able to handle millions of Objects, is there a limit?<br/>
  **Answer**: Follow this
  link: https://stackoverflow.com/questions/64020930/can-hive-in-flutter-store-bigdatasome-gb-files

- **Question**: Now, can anyone comment why store data locally if you can use the cloud?<br/>
  **Answer**: There are multiple scenarios
    - In case internet is not connected and still you wanna show some data
    - Loading from local is way faster then loading from cloud so in case there is some repetition
      of loading data you can store it locally
    - In case you just want to make a application with no need of cloud other than storing data. You
      can use local DB and many more

- **Question**: is it possible to use Hive with out the adapters? Is there any specific reason why
  adapters are needed?<br/>
  **Answer**: Follow this
  link: https://medium.com/flutter-community/storing-local-data-with-hive-and-provider-in-flutter-a49b6bdea75a

- **Question**: how can i fill the box with default data that i can update in the future?<br/>
  **Answer**: Follow this
  link: https://www.youtube.com/redirect?event=comments&redir_token=QUFFLUhqbDhYdDB3LXJaaXJ3YnZ5cFlKQXhOWkl5TjZWQXxBQ3Jtc0ttSGhNbGJ4YkJZalhzc09CNGJPdUhBdkRpbmZ1RE5BRldHT3ZWYXI1SkVHSTY1YUsyQWdnemctek5GWjhxVTdLSG5EM1huYjdoZTRTcVJOaElQYWZ2U3U5dUNBWFN3dlN2emw4Y3FHUGZmbDYtbklCVQ&q=https%3A%2F%2Fmedium.com%2Fflutter-community%2Fstoring-local-data-with-hive-and-provider-in-flutter-a49b6bdea75a&stzid=UgzNYHyNTxf-sGr6UK14AaABAg.9enHBQ6G-Xn9eprImXhZqq

- **Question**: For more complex database operations sqlfite is best over hive can you please
  explain me how?<br/>
  **Answer**: Follow this
  link: https://blog.codemagic.io/choosing-the-right-database-for-your-flutter-app/

- **Question**: How can we add a list<myobject> in the model class in hive? Do we have to register
  an adapter for the myobject class as well as for the model class? Is the way of registering
  adapter for myobject similiar to that of model class?<br/>
  **Answer**: Follow this
  link: https://www.youtube.com/redirect?event=comments&redir_token=QUFFLUhqbmduMEtUbnp2ZEo2bWJnSWJMdXFrZkNFVXd3Z3xBQ3Jtc0tuTk1GUDVHQi1TTjI1ckFmb2NUUG5md2tYcHo0V1BjMEV6clpHd0g1MzI3VEV6YUdrZnUtQU1vT3JURnZmYTlkMWJabU5SSlViYjUwSVpiY3pKZkFSWEpiMjI5aGRrZzhwXzY1RnhEc0pzLTNGbHBBdw&q=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F59413228%2Fhow-to-save-a-listobject-and-retrieve-using-hive&stzid=UgwglGHrnZ4bMzHfnaR4AaABAg.9QW7n5lzCB-9cc_FNVp3gE

- **Question**: Would it be good to use hive DB with search delegate?<br/>
  **Answer**: Follow this
  link: https://viveky259259.medium.com/hive-for-flutter-1-when-why-database-cea0013c9fc1

- **Question**: Does anyone know how to show only part of the values contained in the box based on a
  word search?<br/>
  **Answer**: Follow this
  link: https://stackoverflow.com/questions/64272936/how-to-filter-hive-data-in-flutter-by-data-values

**Problems from Flutter Stackoverflow**

- https://stackoverflow.com/questions/74951242/getting-an-error-of-register-adapter-in-flutter-using-hive
- https://stackoverflow.com/questions/71661803/flutter-hive-hive-boxes-are-cleared-but-then-data-is-restored-on-restart
- https://stackoverflow.com/questions/64944999/how-to-solve-the-box-not-found-error-hive-flutter
- https://stackoverflow.com/questions/72548100/iam-having-a-problem-with-adding-fields-in-a-hive-model-in-flutter
- https://stackoverflow.com/questions/67325665/error-retrieving-data-from-hive-in-flutter-listdynamic-is-not-a-subtype-of
- https://stackoverflow.com/questions/73378909/flutter-hive-dead-lock-code-needs-an-adapter-class-to-run-but-that-adapter
- https://stackoverflow.com/questions/61832322/problem-while-flutter-build-runner-register-generator-for-using-the-hive-databas
- https://stackoverflow.com/questions/70614042/flutter-hive-box-not-found-even-though-it-was-opened
- https://stackoverflow.com/questions/67298056/using-hive-boxuser-throws-the-error-the-box-user-is-already-open-and-of-ty
- https://stackoverflow.com/questions/68717933/flutter-path-provider-package-error-with-hive-database-and-null-safety
- https://stackoverflow.com/questions/72546957/when-i-implement-hive-library-for-save-theme-mode-i-have-null-error
- https://stackoverflow.com/questions/61485627/unable-to-use-hive-plugin-in-flutter
- https://stackoverflow.com/questions/60257233/the-box-contacts-is-already-open-and-of-type-boxcontact-when-trying-to-acces
- https://stackoverflow.com/questions/74653907/unhandled-exception-hiveerror-you-need-to-initialize-hive-or-provide-a-path-to
- https://stackoverflow.com/questions/77060962/hive-type-null-is-not-a-subtype-of-type-string-in-type-cast
- https://stackoverflow.com/questions/74713206/save-data-from-json-with-flutter-hive
- https://stackoverflow.com/questions/75901446/facing-rangeerror-not-enough-bytes-available-when-i-try-to-get-values-from-h
- https://stackoverflow.com/questions/74738686/not-able-to-change-the-postion-of-items-in-hive-database
- https://stackoverflow.com/questions/74684235/flutter-unhandled-exception-platformexceptionchannel-error-unable-to-establ

## 3. Video Structure

**Main Points / Purpose Of Lesson**

1. Hive, a NoSQL, lightweight, and high-performance database for Flutter, offers several advantages
   like Performance, Local Storage, Efficient Data Handling, Simplicity and Ease of Use, Type
   Safety, and No ORMs Required. Hive supports all platforms supported by Flutter.
2. Main points:
    - Add notes
    - Edit notes
    - Delete notes
3. In this video, you will learn how to use hive database with boxes and type adapters.

**The Structured Main Content**

# 1. Official documentation:

First of all, visit [docs.hivedb.dev](https://docs.hivedb.dev/) to have a quick overview that how to
use hive database for flutter.

# 2. Add dependencies in pubspec.yaml file:

According to [docs](https://docs.hivedb.dev/#/?id=add-to-project), add following packages with their
latest version in your project's pubspec.yaml file:

- `hive` and `hive_flutter` in dependencies section
- `build_runner` and `hive_generator` in dev_dependencies section

# 3. Initialize hive database in flutter app

Before you can open a box, Hive needs to know where it can store its data. You can use the
`path_provider` package to get a valid directory.

The `hive_flutter` package provides the `Hive.initFlutter()` extension method which handles
everything for you.

# 4. What are boxes?

All of your data is stored in boxes. A box can be compared to a table in SQL, but it does not
have a structure and can contain anything.

### Open a box:

- Before you can use a box, you have to open it. For regular boxes, this loads all of its data
  from the local storage into memory for immediate access.
- For a small app, a single box might be enough. For more advanced problems, boxes are a great
  way to organize your data. Boxes can also be encrypted to store sensitive data.
- You can access it using `openBox` method of Hive database:

```dart
await Hive.openBox('boxName');
```

When you open a box, you can specify that it may only contain values of a specific type. For example
a notes box could be opened like this:

```dart
await Hive.openBox<Note>('notes');
```

- E is type parameter which tells the type of the values in the box.
- openBox has multiple parameters like:
    - name is positional parameter and the name of box which specifies the storage location and is
      used to check if a box already exists. It is case-insensitive.
    - All other parameters are named like encryptionCipher, keyComparator, compactionStrategy,
      crashRecovery, path, bytes, collection, encryptionKey.

- If the box is already open, it is returned immediately and all supplied parameters are ignored.
- Once you obtained a box instance, you can read, write, and delete entries.
- To get the singleton instance of an already opened box, you may call:

```dart
Hive.open<E>('boxName');
```

### Close a box

When you close a Hive box, you are essentially telling Hive that you are no longer using it. Hive
will then flush any pending changes to disk and free up the resources used by the box. This includes
the box's data, which is kept in memory for performance reasons.

`Hive.close()` closes the entire Hive database(all open boxes).
`Hive.box('boxName').close()` is specific to a particular box within the Hive database.

```dart
    Hive.close();
    // Hive.box('boxName').close();
```

If you don't need a box again, you should close it. All cached keys and values of the box will be
dropped from memory and the box file is closed after all active read and write operations finished.

### Read from box:

Reading from a box is very easy:

```dart
var box = Hive.box('myBox');

String name = box.get('name');

DateTime birthday = box.get('birthday');
```

If the key does not exist, null is returned. Optionally you can specify a defaultValue that is
returned in case the key does not exist.

```dart
double height = box.get('randomKey', defaultValue: 17.5);
```

### Write to a box:

Writing to a box is almost like writing to a map:

```dart
var box = Hive.box('myBox');

box.put('name', 'Paul');

box.put('friends', ['Dave', 'Simon', 'Lisa']);

box.put(123, 'test');

box.putAll({'key1': 'value1', 42: 'life'});
```

The changes are written to the disk as soon as possible in the background but all listeners are
notified immediately. If the async operation fails (which it should not), all listeners are notified
again with the old values.

If you want to make sure that a write operation is successful, just await its Future.

### Delete a box:

When you delete a Hive box, you are telling Hive to remove the box and all of its data from disk.
This is a permanent operation, and there is no way to recover the deleted data.

If you want to change an existing value, you can either override it using for example `put()` or
delete it.

If the key does not exist, no disk access is needed and the returned Future finishes immediately.

Writing `null` is **NOT** the same as deleting a value.

##### Difference between close and delete of a box is that:

**close** free up the resources used by the box. It includes the box's data, which is kept in memory
for high performance reasons.
**delete** box and its data will be permanently removed, and the operation cannot be undone.

# 5. Use hive database in flutter:

Hive supports all platforms supported by Flutter.

### Initialize flutter apps:

Before you can open a box, Hive needs to know where it can store its data. Android and iOS have very
strict rules for allowed directories. You can use the `path_provider` package to get a valid
directory.

The `hive_flutter` package provides the `Hive.initFlutter()` extension method which handles
everything for you.

### ValueListenable

If you want your widgets to refresh based on the data stored in Hive, you can use
the `ValueListenableBuilder`. The `box.listenable()` method provides a `ValueListenable`.

If a widget only depends on specific keys in your box, you can provide the `keys` parameter
to `listenable` method. It is good practice to refresh widgets only if necessary.

### Auto increment & indices

We already know that Hive supports unsigned integer keys. You can use auto-increment keys if you
like. This is very useful for storing and accessing multiple objects. You can use a Box like a list.

```dart
import 'package:hive/hive.dart';

void main() async {
  var friends = await Hive.openBox('friends');
  friends.clear();

  friends.add('Lisa');            // index 0, key 0
  friends.add('Dave');            // index 1, key 1
  friends.put(123, 'Marco');      // index 2, key 123
  friends.add('Paul');            // index 3, key 124

  print(friends.getAt(0));
  print(friends.get(0));
  
  print(friends.getAt(1));
  print(friends.get(1));
  
  print(friends.getAt(2));
  print(friends.get(123));
  
  print(friends.getAt(3));
  print(friends.get(124));
}
```

There are also `getAt()`, `putAt()` and `deleteAt()` methods to access or change values by their
index.

# 6. Custom Objects:

### TypeAdapters:

Hive supports all primitive types but TypeAdapters allow you to store any object that that allows
you to store and retrieve any object that you want. TypeAdapter serves as a bridge between custom
data types in Dart and the Hive database.

You can either write a TypeAdapter yourself or generate it. Most of the time the generated adapter
will perform really good. Sometimes there are small things you can improve with a manually written
adapter.

### Register Adapter:

When you want Hive to use a TypeAdapter, you have to register it.

- Two things are needed for that, An instance of the adapter and a typeId:
- Every type has a unique `typeId` which is used to find the correct adapter when a value is brought
  back from disk.
- All `typeIds` between 0 and 223 are allowed.
- Make sure to use typeIds consistently. Your changes have to be compatible to previous versions of
  the box.
- You can provide default values to properties and fields by providing `defaultValue` argument to
  `@HiveField` annotation.
- It's recommended to register all TypeAdapters before opening any boxes.

### Generate Adapter:

The `hive_generator` package can automatically generate `TypeAdapters` for almost any class.

- To generate a TypeAdapter for a class, annotate it with `@HiveType` and provide a `typeId` (
  between
  0 and 223).
- Annotate all fields which should be stored with `@HiveField`.
- Run build task
  ```dart
  flutter packages pub run build_runner build
  ```
- Register the generated adapter.

# 7. Practical Example:

- Inside models folder, let's create `note.dart` file. In this file, let's create Note
  class and extend it from `HiveObject`, annotate this class with `@HiveType(typeId:0)`:

```dart
import 'package:hive/hive.dart';

part 'note.g.dart';

@HiveType(typeId: 0)
class Note extends HiveObject {
  @HiveField(0)
  String title;

  @HiveField(1)
  String description;

  Note({required this.title, required this.description});
}
```

- Then run following command in terminal to generate `NoteAdapter` class:
   ```dart
   flutter packages pub run build_runner build
   ```
- Inside `main.dart`, do widgets binding and initialize hive database.
    - Initialization is not needed in browser.
    - As we have our own type of box so register it by calling `registerAdapter()` method of hive.
    - After registration, open this box.

```dart
void main() async {
  WidgetsFlutterBinding.ensureInitialized();

  await Hive.initFlutter();
  Hive.registerAdapter(NoteAdapter());

  await Hive.openBox<Note>('notes');

  runApp(const MyApp());
}
```

- Let's create box class directly separate from the ui screen named `boxes.dart` in boxes folder:

```dart
import 'package:hive/hive.dart';

import '/models/note.dart';

class Boxes {
  static Box<Note> getNotes() => Hive.box<Note>('notes');
}
```

- Inside `home_screen.dart` file, we are using `ValueListenableBuilder` to refresh data stored in
  Hive. It has two required parameters:
    - `valueListenable`. We are providing box of type Note and calling `listenable` method of
      hive database.
    - `builder`. Here we are using listview builder and returning `Card` in the `itemBuilder`.
    - Add button adds the notes box with title and description by calling `.add()` method of hive
      database on box.
    - Update button updates the notes box by using `.save()` method of hive database on box.
    - Delete button deletes the notes box by using `data[index].delete();` method of hive database
      on box. Where data is following:
      ```dart
      final data = box.values.toList().cast<Note>();
      ``` 
    - addNotes method:
      ```dart
              final data = Note(
                title: titleController.text,
                description: descriptionController.text,
              );

              final noteBox = NoteBox.getNotes();
              noteBox.add(data);

              debugPrint(noteBox.length.toString());

              titleController.clear();
              descriptionController.clear();
              Navigator.pop(context);
      
              // box.put('myKey',data);
              // data.save();
      ```
    - createNoteDialog method:
      ```dart
  
          // var box = await Hive.openBox('testBox');
          // box.put('name', 'David');
          // debugPrint('Name: ${box.get('name')}');
   
      ```
